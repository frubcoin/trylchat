<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>tryl.chat</title>
  <meta name="description" content="tryl.chat ‚Äî a minimal real-time chat room.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Jersey+10&display=swap"
    rel="stylesheet">
  <link rel="preload" href="fonts/GeistPixel.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
</head>

<body>
  <!-- Global Background -->
  <!-- Global Background -->
  <div class="bg"></div>

  <!-- ‚ïê‚ïê‚ïê LOGIN OVERLAY ‚ïê‚ïê‚ïê -->
  <div id="login-overlay">

    <div id="login-box">
      <div class="login-wordmark">
        <svg class="wordmark-icon" width="45" height="45" viewBox="0 0 45 45" fill="#f9fafb"
          xmlns="http://www.w3.org/2000/svg">
          <path d="M18.0041 42.0098H16.0037V44.0102H18.0041V42.0098Z" fill="#f9fafb" />
          <path
            d="M16.0037 40.0091V42.0096H12.0028V40.0091H8.0019V38.0087H6.0014V36.0082H4.0009V34.0077H2.0005V30.0068H12.0028V36.0082H14.0032V40.0091H16.0037Z"
            fill="#f9fafb" />
          <path
            d="M30.0068 30.0068V34.0077H28.0064V38.0087H26.0059V42.0096H24.0054V44.01H20.0045V42.0096H18.0041V38.0087H16.0036V34.0077H14.0032V30.0068H30.0068Z"
            fill="#f9fafb" />
          <path d="M28.0063 42.0098H26.0059V44.0102H28.0063V42.0098Z" fill="#f9fafb" />
          <path
            d="M42.0095 30.0068V34.0077H40.0091V36.0082H38.0086V38.0087H36.0082V40.0091H32.0073V42.0096H28.0063V40.0091H30.0068V36.0082H32.0073V30.0068H42.0095Z"
            fill="#f9fafb" />
          <path d="M30.0068 18.0039H26.0059V20.0044H30.0068V18.0039Z" fill="#f9fafb" />
          <path d="M30.0068 22.0049H26.0059V24.0053H30.0068V22.0049Z" fill="#f9fafb" />
          <path
            d="M0 14.0029V28.0061H44.01V14.0029H0ZM12.0027 22.0047H10.0023V26.0057H8.0018V22.0047H6.0014V26.0057H4.0009V22.0047H2.0005V16.0034H4.0009V22.0047H6.0014V20.0043H8.0018V22.0047H10.0023V16.0034H12.0027V22.0047ZM22.005 18.0038H16.0036V20.0043H20.0045V22.0047H16.0036V24.0052H22.005V26.0057H14.0032V16.0034H22.005V18.0038ZM32.0073 20.0043H30.0068V22.0047H32.0073V24.0052H30.0068V26.0057H24.0055V16.0034H30.0068V18.0038H32.0073V20.0043ZM42.0095 20.0043H40.0091V22.0047H42.0095V24.0052H40.0091V26.0057H34.0077V24.0052H40.0091V22.0047H36.0082V20.0043H40.0091V18.0038H34.0077V16.0034H40.0091V18.0038H42.0095V20.0043Z"
            fill="#f9fafb" />
          <path
            d="M42.0095 10.0023V12.0028H32.0073V8.00189H30.0068V4.00089H28.0063V2.00049H32.0073V4.00089H36.0082V6.00139H38.0086V8.00189H40.0091V10.0023H42.0095Z"
            fill="#f9fafb" />
          <path d="M28.0063 0H26.0059V2.0005H28.0063V0Z" fill="#f9fafb" />
          <path
            d="M30.0068 10.0023V12.0027H14.0032V10.0023H16.0036V6.0014H18.0041V2.0005H20.0045V0H24.0054V2.0005H26.0059V6.0014H28.0064V10.0023H30.0068Z"
            fill="#f9fafb" />
          <path d="M18.0041 0H16.0037V2.0005H18.0041V0Z" fill="#f9fafb" />
          <path
            d="M16.0037 2.00049V4.00089H14.0032V8.00189H12.0028V12.0028H2.0005V10.0023H4.0009V8.00189H6.0014V6.00139H8.0019V4.00089H12.0028V2.00049H16.0037Z"
            fill="#f9fafb" />
        </svg>
        tryl.chat
      </div>
      <!-- STEP 1: WALLET (Phantom only) -->
      <div id="step-wallet">
        <p class="login-subtitle">connect your phantom wallet to continue</p>
        <div class="login-actions">
          <button id="btn-phantom" class="btn-primary" style="font-size: 14px; background: #F9FAFB; color: #000;">
            Connect Phantom
          </button>
          <div id="wallet-address-display" class="hidden"
            style="margin-top: 10px; font-size: 11px; opacity: 0.7; font-family: monospace;"></div>
        </div>
      </div>

      <!-- STEP 2: USERNAME -->
      <form id="login-form" class="hidden">
        <p class="login-subtitle">enter a name to start chatting</p>
        <div class="login-actions">
          <input type="text" id="username-input" maxlength="20" placeholder="your name" autocomplete="off">
          <select id="language-select" class="input-minimal">
            <option value="en">English</option>
            <option value="es">Espa√±ol (Spanish)</option>
            <option value="fr">Fran√ßais (French)</option>
            <option value="de">Deutsch (German)</option>
            <option value="ja">Êó•Êú¨Ë™û (Japanese)</option>
            <option value="ko">ÌïúÍµ≠Ïñ¥ (Korean)</option>
            <option value="zh">‰∏≠Êñá (Chinese)</option>
            <option value="pt">Portugu√™s (Portuguese)</option>
            <option value="it">Italiano (Italian)</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π (Russian)</option>
          </select>
          <button type="submit" class="btn-primary">Join ‚Üí</button>
          <button type="button" id="btn-back-wallet" class="btn-text" style="font-size: 12px; margin-top: 8px;">‚Üê
            back</button>
        </div>
      </form>

      <p class="login-hint">be kind to each other</p>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê MAIN CHAT PAGE ‚ïê‚ïê‚ïê -->
  <div id="chat-page" class="hidden">

    <!-- HEADER -->
    <header id="site-header">
      <div class="header-left">
        <h1 class="header-wordmark">
          <svg class="wordmark-icon" width="45" height="45" viewBox="0 0 45 45" fill="#f9fafb"
            xmlns="http://www.w3.org/2000/svg">
            <path d="M18.0041 42.0098H16.0037V44.0102H18.0041V42.0098Z" fill="#" />
            <path
              d="M16.0037 40.0091V42.0096H12.0028V40.0091H8.0019V38.0087H6.0014V36.0082H4.0009V34.0077H2.0005V30.0068H12.0028V36.0082H14.0032V40.0091H16.0037Z"
              fill="#f9fafb" />
            <path
              d="M30.0068 30.0068V34.0077H28.0064V38.0087H26.0059V42.0096H24.0054V44.01H20.0045V42.0096H18.0041V38.0087H16.0036V34.0077H14.0032V30.0068H30.0068Z"
              fill="#f9fafb" />
            <path d="M28.0063 42.0098H26.0059V44.0102H28.0063V42.0098Z" fill="#f9fafb" />
            <path
              d="M42.0095 30.0068V34.0077H40.0091V36.0082H38.0086V38.0087H36.0082V40.0091H32.0073V42.0096H28.0063V40.0091H30.0068V36.0082H32.0073V30.0068H42.0095Z"
              fill="#f9fafb" />
            <path d="M30.0068 18.0039H26.0059V20.0044H30.0068V18.0039Z" fill="#f9fafb" />
            <path d="M30.0068 22.0049H26.0059V24.0053H30.0068V22.0049Z" fill="#f9fafb" />
            <path
              d="M0 14.0029V28.0061H44.01V14.0029H0ZM12.0027 22.0047H10.0023V26.0057H8.0018V22.0047H6.0014V26.0057H4.0009V22.0047H2.0005V16.0034H4.0009V22.0047H6.0014V20.0043H8.0018V22.0047H10.0023V16.0034H12.0027V22.0047ZM22.005 18.0038H16.0036V20.0043H20.0045V22.0047H16.0036V24.0052H22.005V26.0057H14.0032V16.0034H22.005V18.0038ZM32.0073 20.0043H30.0068V22.0047H32.0073V24.0052H30.0068V26.0057H24.0055V16.0034H30.0068V18.0038H32.0073V20.0043ZM42.0095 20.0043H40.0091V22.0047H42.0095V24.0052H40.0091V26.0057H34.0077V24.0052H40.0091V22.0047H36.0082V20.0043H40.0091V18.0038H34.0077V16.0034H40.0091V18.0038H42.0095V20.0043Z"
              fill="#f9fafb" />
            <path
              d="M42.0095 10.0023V12.0028H32.0073V8.00189H30.0068V4.00089H28.0063V2.00049H32.0073V4.00089H36.0082V6.00139H38.0086V8.00189H40.0091V10.0023H42.0095Z"
              fill="#f9fafb" />
            <path d="M28.0063 0H26.0059V2.0005H28.0063V0Z" fill="#f9fafb" />
            <path
              d="M30.0068 10.0023V12.0027H14.0032V10.0023H16.0036V6.0014H18.0041V2.0005H20.0045V0H24.0054V2.0005H26.0059V6.0014H28.0064V10.0023H30.0068Z"
              fill="#f9fafb" />
            <path d="M18.0041 0H16.0037V2.0005H18.0041V0Z" fill="#f9fafb" />
            <path
              d="M16.0037 2.00049V4.00089H14.0032V8.00189H12.0028V12.0028H2.0005V10.0023H4.0009V8.00189H6.0014V6.00139H8.0019V4.00089H12.0028V2.00049H16.0037Z"
              fill="#f9fafb" />
          </svg>
          tryl.chat
        </h1>
      </div>
      <div class="header-right">
        <div class="header-meta">
          <span class="online-dot"></span>
          <span id="online-count">0</span> people
          <span class="header-separator">¬∑</span>
          <span id="guest-count">0</span> guests
        </div>
      </div>
    </header>

    <!-- MAIN LAYOUT -->
    <div id="main-layout">

      <!-- ROOMS SIDEBAR (LEFT) -->
      <aside id="rooms-sidebar">
        <div class="sidebar-section">
          <h3 class="sidebar-title">Rooms</h3>
          <ul id="room-list">
            <!-- populated by JS -->
          </ul>
        </div>
        <!-- Sidebar Footer for Scroll Controls -->
        <div class="sidebar-footer">
          <button id="btn-scroll-top" class="scroll-btn hidden" title="Scroll to Top">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M11 1H13V2H14V3H15V4H16V5H17V6H18V7H19V8H20V9H21V10H22V11H23V12H22V13H21V14H20V13H19V12H18V11H17V10H16V9H15V8H14V23H10V8H9V9H8V10H7V11H6V12H5V13H4V14H3V13H2V12H1V11H2V10H3V9H4V8H5V7H6V6H7V5H8V4H9V3H10V2H11V1Z"
                fill="currentColor" />
            </svg>
          </button>
          <button id="btn-scroll-bottom" class="scroll-btn hidden" title="Scroll to Bottom">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M13 23H11V22H10V21H9V20H8V19H7V18H6V17H5V16H4V15H3V14H2V13H1V12H2V11H3V10H4V11H5V12H6V13H7V14H8V15H9V16H10V1H14V16H15V15H16V14H17V13H18V12H19V11H20V10H21V11H22V12H23V13H22V14H21V15H20V16H19V17H18V18H17V19H16V20H15V21H14V22H13V23Z"
                fill="currentColor" />
            </svg>
          </button>
        </div>
      </aside>

      <!-- CHAT AREA -->
      <div id="chat-area">
        <!-- PINNED MESSAGE -->
        <div id="pinned-banner" class="hidden">
          <span class="pin-label">PIN</span>
          <span id="pin-text">Welcome to tryl.chat!</span>
        </div>
        <div id="chat-messages">
          <!-- messages appear here -->
        </div>

        <form id="chat-form">
          <div id="typing-indicator" class="hidden"></div>

          <div id="chat-input-area">
            <!-- Reply Bar (Absolute/Overlay) -->
            <div id="reply-bar" class="hidden">
              <div class="reply-content">
                <span class="reply-to">Replying to <b id="reply-to-user"></b></span>
                <span id="reply-text-preview"></span>
              </div>
              <button id="btn-cancel-reply" type="button">‚úï</button>
            </div>

            <div id="emoji-wrapper">
              <button type="button" id="btn-color" class="color-btn" title="Change name color"></button>
              <div id="color-picker-popover" class="hidden"></div>
              <button type="button" id="btn-emoji" class="icon-btn">üòä</button>
              <div id="emoji-picker-container" class="hidden"></div>
            </div>

            <input type="text" id="chat-input" placeholder="Say something..." autocomplete="off">

            <button type="submit" class="btn-send" title="Send">
              <svg width="38" height="38" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M22 9V7H21V5H20V4H19V3H17V2H15V1H9V2H7V3H5V4H4V5H3V7H2V9H1V15H2V17H3V19H4V20H5V21H7V22H9V23H15V22H17V21H19V20H20V19H21V17H22V15H23V9H22ZM16 14H15V15H14V16H13V17H12V13H6V11H12V7H13V8H14V9H15V10H16V11H17V13H16V14Z"
                  fill="#e9e9e9" />
              </svg>
            </button>
          </div>
        </form>
      </div>

      <!-- SIDEBAR (RIGHT) -->
      <aside id="sidebar">
        <div class="sidebar-section">
          <h3 class="sidebar-title">People</h3>
          <ul id="user-list">
            <li class="no-users">no one here yet</li>
          </ul>
        </div>
        <div class="sidebar-section">
          <h3 class="sidebar-title">Visitors</h3>
          <div id="hit-counter">
            <span id="counter-value">0</span>
          </div>
        </div>
        <!-- Admin Panel (Hidden by default) -->
        <div id="admin-panel" class="hidden">
          <select id="round-select">
            <option value="1">1 round</option>
            <option value="3" selected>Best of 3</option>
            <option value="5">Best of 5</option>
            <option value="7">Best of 7</option>
          </select>
          <button id="btn-admin-game">‚ö° Start</button>
        </div>
        <!-- AI Status -->
        <div id="ai-status" class="hidden"></div>
      </aside>

    </div>

  </div>

  <!-- ‚ïê‚ïê‚ïê REACTION GAME OVERLAY ‚ïê‚ïê‚ïê -->
  <div id="game-overlay" class="hidden">
    <div id="game-message">WAIT FOR IT...</div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5.5.2/dist/iro.min.js"></script>
  <div id="sidebar-backdrop" class="hidden"></div>
  <script src="chat.js?v=7"></script>
</body>

</html>